{% extends "layouts/base.html" %}

{% block title %} 고민고민하지말조 {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<style type="text/css">

        .user_bg {
        background: rgb(234, 112, 45);
        }
        .nega_bg {
            background: rgb(76, 76, 76);
        }
        .user_font {
            font-family: 'Jua';
            font-size: 20px !important;
        }

        .card img{
            height: 180px;
            width: 100%;
        }

</style>
{% endblock stylesheets %}

{% block content %}
<div>
    <div class="row mt-4">
        <div class="card col-md-10 w-100" style="margin: 0 auto;">
          <div class="card-header w-100 text-dark bg-white rounded">
            <div class="nav-tabs-navigation">
              <div class="nav-tabs-wrapper">
                <ul class="nav nav-tabs text-center" data-tabs="tabs">
                  <li class="nav-item col-sm-2">
                    <a class="nav-link active user_font" href="#korean" data-toggle="tab">
                      한식
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item col-sm-2">
                    <a class="nav-link user_font" href="#chinese" data-toggle="tab">
                      분식
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item col-sm-2">
                    <a class="nav-link user_font" href="#japanese" data-toggle="tab">
                        양식
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item col-sm-2">
                    <a class="nav-link user_font" href="#western" data-toggle="tab">
                      일식
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item col-sm-2">
                    <a class="nav-link user_font" href="#casual" data-toggle="tab">
                       중식
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                </ul>

              </div>
            </div>
          </div>
          <div class="card-body pt-0">
            <div class="tab-content">
              <div class="tab-pane active" id="korean">
                 <div class="row">
                     {%for obj in data_list%}
                        {% if obj.store_id == 1 %}
                            <div class="col-sm-4">
                                <div class="card" style="box-shadow: 10px 10px 20px darkgray;">
                                     <img class="card-img-top rounded" src="/static/menu/{{obj.menu_img}}">
                                     <form action="/add_cart" method="post" class="text-center">
                                         <div class="card-body text-center p-0">
                                             <input type="hidden" name="menu_id" value="{{obj.menu_id}}">
                                             <input type="hidden" name="store_id" value="{{obj.store_id}}">
                                             <input type="hidden" name=path value="{{path}}">
                                             <input type="text" class="form-control-plaintext text-center bg-white mt-2 p-0 h4 user_font" aria-label="메뉴명" name="menu_name" value="{{obj.menu_name}}" readonly>
                                             <div class="row m-0 p-0">
                                                 <div class="col-md-10" style="margin: 0 auto;">
                                                    <input type="text" class="form-control-plaintext bg-white text-danger text-center user_font" aria-label="가격" name="menu_price" value="{{'{:,}원'.format(obj.menu_price)}}" readonly>
                                                 </div>
                                             </div>
                                             <div class="row">
                                                 <div class="col-md-10" style="margin: 0 auto;">
                                                    <div class="input-group content-center row" style="margin: 0 auto;">
                                                        <button type="button" class="btn btn-sm col-3 btn-outline-secondary text-center minus"><i class="fas fa-minus"></i></button>
                                                        <input type="number" class="form-control-plaintext col bg-white text-center" value="0" name="menu_qty" readonly>
                                                        <button class="btn btn-sm btn-outline-secondary col-3 plus text-center" type="button"><i class="fas fa-plus"></i></button>
                                                    </div>
                                                 </div>

                                              </div>
                                        </div>
                                        <input type="submit" value="담 기" class="btn user_bg user_font w-100 rounded cart">
                                     </form>
                                </div>
                            </div>
                        {%endif%}
                     {%endfor %}
                </div>
              </div>
              <div class="tab-pane" id="chinese">
                <div class="row">
                     {%for obj in data_list%}
                        {% if obj.store_id == 2 %}
                            <div class="col-sm-4">
                                <div class="card">
                                     <img class="card-img-top" src="/static/menu/{{obj.menu_img}}" alt="Card image top">
                                     <form action="/add_cart" method="post" class="text-center">
                                         <div class="card-body text-center">
                                             <input type="hidden" name="menu_id" value="{{obj.menu_id}}">
                                             <input type="hidden" name="store_id" value="{{obj.store_id}}">
                                             <input type="hidden" name=path value="{{path}}">
                                             <input type="text" class="form-control-plaintext text-center bg-white m-0 p-0 h4 user_font" aria-label="메뉴명" name="menu_name" value="{{obj.menu_name}}" readonly>
                                             <div class="row m-0 p-0">
                                                 <input type="text" class="form-control-plaintext p-0 col-md-8 bg-white text-danger text-right user_font" aria-label="가격" name="menu_price" value="{{'{:,}'.format(obj.menu_price)}}" readonly>
                                                 <span class="input-group-text col-md-4 user_font text-danger">원</span>
                                             </div>
                                             <div class="row">
                                                   <button type="button" class="btn btn-outline-secondary btn-sm minus col-md-3 text-center" ><i class="fas fa-minus"></i></button>
                                                   <input type="number" class="form-control-plaintext text-center bg-white col-md-5" value="1" name="menu_qty" readonly>
                                                   <button class="btn btn-outline-secondary plus btn-sm plus col-md-3 text-center" type="button"><i class="fas fa-plus"></i></button>
                                              </div>
                                        </div>
                                        <input type="submit" value="담기" class="btn user_bg user_font w-100 rounded cart">
                                     </form>
                                </div>
                            </div>
                        {%endif%}
                     {%endfor %}
                </div>
              </div>
              <div class="tab-pane" id="japanese">
                <div class="row">
                     {%for obj in data_list%}
                        {% if obj.store_id == 3 %}
                            <div class="col-sm-4">
                                <div class="card">
                                     <img class="card-img-top" src="/static/menu/{{obj.menu_img}}" alt="Card image top">
                                     <form action="/add_cart" method="post" class="text-center">
                                         <div class="card-body text-center">
                                             <input type="hidden" name="menu_id" value="{{obj.menu_id}}">
                                             <input type="hidden" name="store_id" value="{{obj.store_id}}">
                                             <input type="hidden" name=path value="{{path}}">
                                             <input type="text" class="form-control-plaintext text-center bg-white m-0 p-0 h4 user_font" aria-label="메뉴명" name="menu_name" value="{{obj.menu_name}}" readonly>
                                             <div class="row m-0 p-0">
                                                 <input type="text" class="form-control-plaintext p-0 col-md-8 bg-white text-danger text-right user_font" aria-label="가격" name="menu_price" value="{{'{:,}'.format(obj.menu_price)}}" readonly>
                                                 <span class="input-group-text col-md-4 user_font text-danger">원</span>
                                             </div>
                                             <div class="row">
                                                   <button type="button" class="btn btn-outline-secondary btn-sm minus col-md-3 text-center" ><i class="fas fa-minus"></i></button>
                                                   <input type="number" class="form-control-plaintext text-center bg-white col-md-5" value="1" name="menu_qty" readonly>
                                                   <button class="btn btn-outline-secondary plus btn-sm plus col-md-3 text-center" type="button"><i class="fas fa-plus"></i></button>
                                              </div>
                                        </div>
                                        <input type="submit" value="담기" class="btn user_bg user_font w-100 rounded cart">
                                     </form>
                                </div>
                            </div>
                        {%endif%}
                     {%endfor %}
                </div>
              </div>
              <div class="tab-pane" id="western">
                <div class="row">
                     {%for obj in data_list%}
                        {% if obj.store_id == 4 %}
                            <div class="col-sm-4">
                                <div class="card">
                                     <img class="card-img-top" src="/static/menu/{{obj.menu_img}}" alt="Card image top">
                                     <form action="/add_cart" method="post" class="text-center">
                                         <div class="card-body text-center">
                                             <input type="hidden" name="menu_id" value="{{obj.menu_id}}">
                                             <input type="hidden" name="store_id" value="{{obj.store_id}}">
                                             <input type="hidden" name=path value="{{path}}">
                                             <input type="text" class="form-control-plaintext text-center bg-white m-0 p-0 h4 user_font" aria-label="메뉴명" name="menu_name" value="{{obj.menu_name}}" readonly>
                                             <div class="row m-0 p-0">
                                                 <input type="text" class="form-control-plaintext p-0 col-md-8 bg-white text-danger text-right user_font" aria-label="가격" name="menu_price" value="{{'{:,}'.format(obj.menu_price)}}" readonly>
                                                 <span class="input-group-text col-md-4 user_font text-danger">원</span>
                                             </div>
                                             <div class="row">
                                                   <button type="button" class="btn btn-outline-secondary btn-sm minus col-md-3 text-center" ><i class="fas fa-minus"></i></button>
                                                   <input type="number" class="form-control-plaintext text-center bg-white col-md-5" value="1" name="menu_qty" readonly>
                                                   <button class="btn btn-outline-secondary plus btn-sm plus col-md-3 text-center" type="button"><i class="fas fa-plus"></i></button>
                                              </div>
                                        </div>
                                        <input type="submit" value="담기" class="btn user_bg user_font w-100 rounded cart">
                                     </form>
                                </div>
                            </div>
                        {%endif%}
                     {%endfor %}
                </div>
              </div>
              <div class="tab-pane" id="casual">
                <div class="row">
                     {%for obj in data_list%}
                        {% if obj.store_id == 5 %}
                            <div class="col-sm-4">
                                <div class="card">
                                     <img class="card-img-top" src="/static/menu/{{obj.menu_img}}" alt="Card image top">
                                     <form action="/add_cart" method="post" class="text-center">
                                         <div class="card-body text-center">
                                             <input type="hidden" name="menu_id" value="{{obj.menu_id}}">
                                             <input type="hidden" name="store_id" value="{{obj.store_id}}">
                                             <input type="hidden" name=path value="{{path}}">
                                             <input type="text" class="form-control-plaintext text-center bg-white m-0 p-0 h4 user_font" aria-label="메뉴명" name="menu_name" value="{{obj.menu_name}}" readonly>
                                             <div class="row m-0 p-0">
                                                 <input type="text" class="form-control-plaintext p-0 col-md-8 bg-white text-danger text-right user_font" aria-label="가격" name="menu_price" value="{{'{:,}'.format(obj.menu_price)}}" readonly>
                                                 <span class="input-group-text col-md-4 user_font text-danger">원</span>
                                             </div>
                                             <div class="row">
                                                   <button type="button" class="btn btn-outline-secondary btn-sm minus col-md-3 text-center" ><i class="fas fa-minus"></i></button>
                                                   <input type="number" class="form-control-plaintext text-center bg-white col-md-5" value="1" name="menu_qty" readonly>
                                                   <button class="btn btn-outline-secondary plus btn-sm plus col-md-3 text-center" type="button"><i class="fas fa-plus"></i></button>
                                              </div>
                                        </div>
                                        <input type="submit" value="담기" class="btn user_bg user_font w-100 rounded cart">
                                     </form>
                                </div>
                            </div>
                        {%endif%}
                     {%endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card col-md-10 pb-0 text-center" style="margin: 0 auto; background-color: lightgray;">
            <div class="card-header user_font text-left mt-3 pb-0">
                <span class="text-dark">장바구니</span> <span class="badge h5 text-white" style="height: 30px; width: 40px; background-color: rgb(234, 112, 45);">{{cart_list|sum(attribute='menu_qty')}}</span>
            </div>
            <div class="row">
                {% for obj in cart_list %}
                    <div class="card col-md-3 ml-0 p-0 m-3">
                        <div class="card-body text-left pr-2">
                            <form action="/delete" method="post">
                                <h5 class="card-title user_font">{{obj.menu_name}} <span class="ml-1">{{obj.menu_qty}}</span><button type="submit" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button></h5>
                                <h6 class="card-text user_font text-danger">{{'{:,}원'.format(obj.menu_price)}}</h6>
                                <input type="hidden" name='cart_menu' value="{{obj.menu_name}}">
                                <input type="hidden" name='path' value="{{path}}">
                            </form>

                        </div>
                    </div>
                {%endfor %}
            </div>

            <div class="row text-center">
                <div class="btn-group w-100">
                    <a href="{{url_for('home_blueprint.cancel')}}" class="btn user_font nega_bg w-100 h-100" style="font-size: 30px">주문취소</a>
                    <a href="{{url_for('home_blueprint.order')}}" class="btn user_font user_bg w-100 h-100 h2" style="font-size: 30px;">주문완료</a>
                  </div>
            </div>
            <input class="btn" id="temp_btn" data-toggle="modal" data-target="#recommend_menu" style="display: none;">
            <input type="hidden" id="cap_chk" value="{{cap_chk}}">
        </div>
    </div>
</div>

<div class="modal fade" id="recommend_menu" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-content">
        <div class="card">
            <div class="card-header text-center">
                <h3 class="user_font border-bottom">이 메뉴를 추천해드립니다.</h3>
            </div>

            <div class="card-body">
                {% for obj in recom_list %}
                    <div class="row">
                        <div class="col-md mb-3">
                            <div class="row h-100">
                                <div class="col-md rounded text-right align-self-center user_font recommend_menu">
                                    <input class="form-check-input" type="checkbox" value="{{obj.menu_name}}" name="recomd_menu" style="width: 20px; height: 20px;">
                                </div>
                            </div>
                        </div>
                        <div class="card mb-3" style="max-width: 540px; margin: 0 auto;">
                          <div class="row no-gutters">
                            <div class="col-md-4">
                              <img src="/static/menu/{{obj.menu_img}}" class="card-img">
                            </div>
                            <div class="col-md-8 align-self-center">
                              <div class="card-body">
                                <div class="card-text h-100 text-left pl-5">
                                    <p class="card-text user_font">{{obj.menu_name}} {{obj.menu_qty}}</p>
                                    <p class="card-text user_font">{{'{:,}'.format(obj.menu_price)}} 원</p>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md"></div>
                    </div>
                {%endfor %}
            </div>
        <form action="/reco_add_cart" method="post" onsubmit="getCheckboxValue()">
            <div class="row text-center">
                <input type="submit" class="btn col-sm-6 text-white nega_bg user_font rounded" value="완료하기" style="margin: 0 auto; font-size: 20px">
                <input type="hidden" value="" name="top_slt_menu" id="recommend_input">
            </div>
        </form>
    </div>
    </div>
  </div>
{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <script>
    $(document).ready(function() {
      // Javascript method's body can be found in assets/js/demos.js
        md.initDashboardPageCharts();
        var cap = $('#cap_chk').val();
        if (cap == 'true'){
            $('#temp_btn').click()
        }
    });
    let result = []

    function getCheckboxValue(){
        var obj_length = document.getElementsByName('recomd_menu').length;

        for (var i=0; i<obj_length; i++){
            if (document.getElementsByName('recomd_menu')[i].checked == true){
                result.push(document.getElementsByName('recomd_menu')[i].value)
            }
        }
        document.getElementById('recommend_input').value = result

    }
  </script>

{% endblock javascripts %}
